<!DOCTYPE html>
<html lang="it" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title layout:title-pattern="$CONTENT_TITLE - $LAYOUT_TITLE">Gestore Sicurezza</title>
    <meta name="description" content=""/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <!--        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">-->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css"
          integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.18.3/dist/bootstrap-table.min.css">
</head>
<body>
<div id="toolbar" class="select" style="display: inline-flex">
    <select class="form-control">
        <option value="all" th:text="#{export.all}"></option>
        <option value="" th:text="#{export.page}">Esporta righe nella pagina</option>
        <option value="selected" th:text="#{export.selected}">Esporta righe selezionate</option>
    </select>
    <button class="btn btn-info btn-modal-title" data-bs-toggle="collapse" data-bs-target="#collapseExample"
            aria-expanded="false" aria-controls="risorsaCollapse"><i class="far fa-caret-square-down"></i></button>
    <!--    <button class="btn btn-info btn-modal-title" onclick="showModalPost()" data-bs-target="#myModal" aria-expanded="false"><i class="fas fa-user-plus"></i></button>-->
</div>

<div>
    <table
            id="table"
            data-toggle="table"
            class="table table-striped table-sm table-hover table-fixed table-responsive"
            data-toolbar="#toolbar"
            data-page-size="25"
            data-locale="it-IT"
            data-show-refresh="true"
            data-show-export="true"
            data-show-pagination-switch="true"
            data-search="true"
            data-page-list="[25, 50, 100]"
            data-pagination="true"
            data-visible-search="true"
            data-height=""
            data-click-to-select="true"
            data-mobile-responsive="true"
            data-check-on-init="true"
            data-show-search-button="true"
            data-show-search-clear-button="true"
            data-total-field="count"
            data-data-field="items"
            data-url="/gestoreSicurezza/utenti">

        <thead class="table-dark">
        <tr>
            <th data-field="state">Seleziona</th>
            <th data-field="idUser" data-width="50" data-align="center" data-sortable="true"
                th:text="#{table.security.idutente}"></th>
            <th data-field="name" data-sortable="true" data-align="center" th:text="#{table.security.name}"></th>
            <th data-field="surname" data-sortable="true" data-align="center" th:text="#{table.security.surname}"></th>
            <th data-field="mail" data-align="center" data-sortable="true" th:text="#{table.security.mail}"></th>
            <th data-field="status" data-align="center" data-sortable="true" data-formatter="stateFormatter"
                th:text="#{table.security.status}"></th>
            <th data-field="WS_List" data-formatter="seeWebServiceListFormatter" data-force-export="false"
                data-align="center" data-events="operateEvents" th:text="#{table.security.wslist}"></th>
            <th data-field="authKey" data-formatter="seeKeyFormatter" data-events="operateEvents"
                data-force-export="false" data-align="center" th:text="#{table.security.authkey}"></th>
            <th data-field="Modify" data-formatter="modifyFormatter" data-align="center" data-force-export="false"
                data-events="operateEvents" th:text="#{table.security.modify}"></th>
            <th data-field="Remove" data-formatter="removeFormatter" data-align="center" data-force-export="false"
                data-events="operateEvents" th:text="#{table.security.remove}"></th>
        </tr>
        </thead>

    </table>
</div>
<script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
        integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
        integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
        crossorigin="anonymous"></script>

<!--<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>-->
<script src="https://cdn.jsdelivr.net/npm/jqueryui@1.11.1/jquery-ui.min.js"></script>
<script src="https://unpkg.com/bootstrap-table@1.18.3/dist/bootstrap-table.min.js"></script>
<script src="https://unpkg.com/bootstrap-table@1.18.3/dist/bootstrap-table-locale-all.min.js"></script>
<script src="https://unpkg.com/bootstrap-table@1.18.3/dist/extensions/filter-control/bootstrap-table-filter-control.min.js"></script>
<script src="https://unpkg.com/bootstrap-table@1.18.3/dist/extensions/i18n-enhance/bootstrap-table-i18n-enhance.min.js"></script>
<script src="https://unpkg.com/tableexport.jquery.plugin/tableExport.min.js"></script>
<script src="https://unpkg.com/bootstrap-table@1.18.3/dist/extensions/export/bootstrap-table-export.min.js"></script>
<script src="https://unpkg.com/bootstrap-table@1.18.3/dist/extensions/toolbar/bootstrap-table-toolbar.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/tableexport.jquery.plugin@1.10.21/tableExport.min.js"></script>
<!--    <script src="https://cdn.jsdelivr.net/npm/tableexport.jquery.plugin@1.10.21/libs/jsPDF/jspdf.min.js"></script>-->
<!--    <script src="https://cdn.jsdelivr.net/npm/tableexport.jquery.plugin@1.10.21/libs/jsPDF-AutoTable/jspdf.plugin.autotable.js"></script>-->
<script>
var $table = $('#table')

function initTable() {
    $('#toolbar').find('select').change(function () {
      $('#table').bootstrapTable('destroy').bootstrapTable({
        locale: $('#locale').val(),
        exportDataType: $(this).val(),
        exportTypes: ['json', 'xml', 'csv', 'txt', 'excel'],
        exportOptions: {
        fileName: 'Export_Utenti_' + new Date(Date.now()).toLocaleDateString()
      },
        columns: [
          {
            field: 'state',
            checkbox: true,
            visible: $(this).val() === 'selected'
          }
<!--          {-->
<!--            field: 'idDataset',-->
<!--            title: 'Id Dataset'-->
<!--          }, {-->
<!--            field: 'guid',-->
<!--            title: 'Guid'-->
<!--          }, {-->
<!--            field: 'alternateIdentifier',-->
<!--            title: 'Alternate Identifier'-->
<!--          },{-->
<!--            field: 'title',-->
<!--            title: 'Title'-->
<!--          }-->
        ]
      })
    }).trigger('change')
  }
</script>
</body>
</html>